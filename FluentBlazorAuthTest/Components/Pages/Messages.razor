@page "/Messages"
@using System
@using System.Collections.Generic
@using Microsoft.AspNetCore.Authorization

<PageTitle>Messages</PageTitle>

<h3>Message Center</h3>

<div class="chat-container">
    <div class="chat-messages">
        @foreach (var message in messages)
        {
            <div class="message @(message.Sender)">
                <span>@message.Text</span>
                <span class="message-info">@message.Timestamp</span>
            </div>
        }
    </div>
    <input type="text" @bind="currentMessage" @onkeypress="SendMessageOnEnter" placeholder="Type a message..." />
    <button @onclick="SendMessage">Send</button>
</div>

@code {
    private List<Message> messages = new List<Message>
    {
        new Message { Text = "Hey", Sender = "received", Timestamp = DateTime.Now.ToShortTimeString() }
    };
    private string currentMessage;

    private void SendMessage()
    {
        if (!string.IsNullOrWhiteSpace(currentMessage))
        {
            var newMessage = new Message
                {
                    Text = currentMessage,
                    Sender = "sent",
                    Timestamp = DateTime.Now.ToShortTimeString()
                };
            messages.Add(newMessage);
            currentMessage = string.Empty;
        }
    }

    private async Task SendMessageOnEnter(KeyboardEventArgs args)
    {
        if (args.Key == "Enter")
        {
            SendMessage();
        }
    }

    public class Message
    {
        public string Text { get; set; }
        public string Sender { get; set; }
        public string Timestamp { get; set; }
    }
}

<style>
 
    .chat-container {
        max-width: 600px;
        margin: 20px auto;
    }

    .chat-messages {
        height: 200px;
        overflow-y: scroll;
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 10px;
    }

   
    .message {
        background-color: #f1f0f0;
        padding: 10px;
        margin-bottom: 5px;
        border-radius: 8px;
        word-wrap: break-word;
    }

    .sent {
        text-align: right;
        background-color: #DCF8C6;
    }

    
    .message-info {
        font-size: 0.8em;
        color: #888;
    }

    
    input[type="text"] {
        width: calc(100% - 70px);
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
        margin-bottom: 10px;
    }

    button {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        background-color: #007bff;
        color: white;
        cursor: pointer;
    }
</style>
